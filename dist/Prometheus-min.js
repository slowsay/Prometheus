/*! prometheus 2016-11-02 */
"use sturct";var Prometheus=Prometheus||{};Prometheus.blendModes={NORMAL:0},Prometheus.hitTest=function(){},Prometheus.isBallInBucket=function(a,b){var c={x:a.x+a.RADIUS,y:a.y+a.RADIUS},d={x:b.x+b.RADIUS,y:b.y+b.RADIUS},e=Math.sqrt(d.x-c.x,2)+Math.sqrt(d.y-c.y,2);return e<a.RADIUS+b.RADIUS},Prometheus.errorcode={e404:"not find object",e405:"current object have children,do not operation"},Prometheus.output=function(a){console.log(a)},Prometheus.Point=function(a,b){this.x=a||0,this.y=b||0},Prometheus.Point.prototype.constructor=Prometheus.Point,Prometheus.Point.prototype.clone=function(){return new Prometheus.Point(this.x,this.y)},Prometheus.Point.prototype.set=function(a,b){this.x=a||0,this.y=b||0},Prometheus.DisplayObject=function(){this.name="",this.x=0,this.y=0,this.sx=0,this.sy=0,this.swidth=0,this.sheight=0,this.width=0,this.height=0,this.scale=new Prometheus.Point(1,1),this.pivot=new Prometheus.Point(0,0),this.rotation=0,this.mask=null,this.parent=null,this.alpha=1,this.autoAlpha=1,this.visible=!0,this.stage=null,this.animate=!1,this.buttonMode=!1,this.children=[],this.numChildren=[]},Prometheus.DisplayObject.prototype.constructor=Prometheus.DisplayObject,Object.defineProperty(Prometheus.DisplayObject,"interactive",{}),Object.defineProperty(Prometheus.DisplayObject,"x",{set:function(a){this.position.x=a},get:function(){return this.position.x}}),Object.defineProperty(Prometheus.DisplayObject,"y",{set:function(a){this.position.y=a},get:function(){return this.position.y}}),Object.defineProperty(Prometheus.DisplayObject,"sx",{set:function(a){this.sx=a},get:function(){return this.sx}}),Object.defineProperty(Prometheus.DisplayObject,"sy",{set:function(a){this.sy=a},get:function(){return this.sy}}),Object.defineProperty(Prometheus.DisplayObject,"swidth",{set:function(a){this.swidth=a},get:function(){return this.swidth}}),Object.defineProperty(Prometheus.DisplayObject,"sheight",{set:function(a){this.sheight=a},get:function(){return this.sheight}}),Object.defineProperty(Prometheus.DisplayObject,"width",{set:function(a){this.width=a},get:function(){return this.width}}),Object.defineProperty(Prometheus.DisplayObject,"height",{set:function(a){this.height=a},get:function(){return this.height}}),Prometheus.DisplayObject.prototype.updateTransform=function(){},Prometheus.DisplayObject.prototype.renderCacheSprite=function(a){a.gl||Prometheus.Sprite.prototype.renderCanvas.call(this,a)},Prometheus.DisplayObject.prototype.renderCanvas=function(){},Prometheus.DisplayObjectContainer=function(){Prometheus.DisplayObject.call(this),this.children=[]},Prometheus.DisplayObjectContainer.prototype=Object.create(Prometheus.DisplayObject.prototype),Prometheus.DisplayObjectContainer.prototype.constructor=Prometheus.DisplayObjectContainer,Prometheus.DisplayObjectContainer.prototype.addChild=function(a){return this.addChildAt(a,this.children.length)},Prometheus.DisplayObjectContainer.prototype.addChildAt=function(a,b){return b>=0&&b<=this.children.length?(a.parent&&a.parent.removeChild(a),a.parent=this,this.children.splice(b,0,a),this.stage&&a.setStageReference(this.stage),a):void 0},Prometheus.DisplayObjectContainer.prototype.getChildAt=function(a){return a>=0&&a<=this.children.length?this.children[a]:void 0},Prometheus.DisplayObjectContainer.prototype.getChildIndex=function(){},Prometheus.DisplayObjectContainer.prototype.removeChild=function(a){return this.removeChildAt(this.children.indexOf(a))},Prometheus.DisplayObjectContainer.prototype.removeChildAt=function(a){var b=this.getChildAt(a);return this.stage&&b.removeStageReference(),b.parent=void 0,this.children.splice(a,1),b},Prometheus.DisplayObjectContainer.prototype.setStageReference=function(a){this.stage=a;for(var b=0,c=this.children.length;c>b;b++){var d=this.children[b];d.setStageReference(a)}},Prometheus.DisplayObjectContainer.prototype.removeStageReference=function(){for(var a=0,b=this.children.length;b>a;a++){var c=this.children[a];c.removeStageReference()}this.stage=null},Prometheus.DisplayObjectContainer.prototype.renderCanvas=function(a){if(0!=this.visible&&0!=this.alpha){this.cacheAsBitmap&&this.renderCacheSprite(a);for(var b=0,c=this.children.length;c>b;b++)this.children[b].renderCanvas(a)}},Prometheus.DisplayObjectContainer.prototype.updateTransform=function(){Prometheus.DisplayObject.prototype.updateTransform.call(this);for(var a=0,b=this.children.length;b>a;a++)this.children[a].updateTransform()},Prometheus.Drawcircle=function(){Prometheus.DisplayObjectContainer.call(this),this.graphicsData=[]},Prometheus.Drawcircle.prototype=Object.create(Prometheus.DisplayObjectContainer.prototype),Prometheus.Drawcircle.prototype.constructor=Prometheus.Graphics,Prometheus.Drawcircle.prototype.draw=function(a,b,c,d,e,f,g){return this.x=d,this.y=e,this.graphicsData[this.graphicsData.length]={color:a,colors:b,line:c,x:d,y:e,alpha:1,rangle:f,flag:g||!1},this},Prometheus.Drawcircle.prototype.updateTransform=function(){for(var a=0,b=this.graphicsData;a<b.length;a++)b[a].x=this.x,b[a].y=this.y,b[a].alpha=this.alpha},Prometheus.Drawcircle.prototype.renderCanvas=function(a){for(var b=a.context,c="rgba(0,0,0,0,1)",d=0,e=this.graphicsData;d<e.length;d++){var f=e[d];b.beginPath(),b.lineWidth=f.line,b.arc(f.x,f.y,f.rangle,0,2*Math.PI),b.globalAlpha=f.alpha,e[d].line>0&&(b.strokeStyle=f.colors||c,b.stroke()),f.flag&&(b.fillStyle=f.color||c,b.fill()),b.closePath()}},Prometheus.Drawline=function(){Prometheus.DisplayObjectContainer.call(this),this.graphicsData=[]},Prometheus.Drawline.prototype=Object.create(Prometheus.DisplayObjectContainer.prototype),Prometheus.Drawline.prototype.constructor=Prometheus.Graphics,Prometheus.Drawline.prototype.draw=function(a,b,c,d,e,f){return this.x=e,this.y=f,this.sx=c,this.sy=d,this.graphicsData[this.graphicsData.length]={color:a,line:b,x:e,y:f,sx:c,sy:d},this},Prometheus.Drawline.prototype.updateTransform=function(){for(var a=0,b=this.graphicsData;a<b.length;a++)b[a].x=this.x,b[a].y=this.y,b[a].sx=this.sx,b[a].sy=this.sy},Prometheus.Drawline.prototype.renderCanvas=function(a){for(var b=a.context,c=0,d=this.graphicsData;c<d.length;c++)b.beginPath(),b.strokeStyle=d[c].color,b.lineWidth=d[c].line,b.moveTo(d[c].sx,d[c].sy),b.lineTo(d[c].x,d[c].y),b.stroke(),b.closePath()},Prometheus.Drawpolygon=function(){Prometheus.DisplayObjectContainer.call(this),this.graphicsData=[]},Prometheus.Drawpolygon.prototype=Object.create(Prometheus.DisplayObjectContainer.prototype),Prometheus.Drawpolygon.prototype.constructor=Prometheus.Graphics,Prometheus.Drawpolygon.prototype.draw=function(a,b,c,d,e,f,g){return this.x=d,this.y=e,this.graphicsData[this.graphicsData.length]={color:a,colors:b,line:c||0,x:d,y:e,point:f||[],flag:g||!1},this},Prometheus.Drawpolygon.prototype.addPoint=function(a,b,c){this.graphicsData[a].point[this.graphicsData[a].point.length]={x:b,y:c}},Prometheus.Drawpolygon.prototype.updateTransform=function(){for(var a=0,b=this.graphicsData;a<b.length;a++)b[a].x=this.x,b[a].y=this.y},Prometheus.Drawpolygon.prototype.renderCanvas=function(a){for(var b=a.context,c="rgba(0,0,0,0,1)",d=0,e=this.graphicsData;d<e.length;d++){b.beginPath(),b.lineWidth=e[d].line,b.moveTo(e[d].x,e[d].y);for(var f=0,g=e[d].point;f<g.length;f++)b.lineTo(g[f].x+e[d].x,g[f].y+e[d].y);e[d].line>0&&(b.strokeStyle=e[d].colors||c,b.stroke()),e[d].flag&&(b.fillStyle=e[d].color||c,b.fill()),b.closePath()}},Prometheus.Graphics=function(){Prometheus.DisplayObjectContainer.call(this),this.graphicsData=[]},Prometheus.Graphics.prototype=Object.create(Prometheus.DisplayObjectContainer.prototype),Prometheus.Graphics.prototype.constructor=Prometheus.Graphics,Prometheus.Graphics.prototype.drawRect=function(a,b,c,d,e){return this.x=b,this.y=c,this.width=d,this.height=e,this.graphicsData[this.graphicsData.length]={bgcolor:Prometheus.hex16rgb(a),x:b,y:c,w:d,h:e},this},Prometheus.Graphics.prototype.updateTransform=function(){for(var a=0,b=this.graphicsData;a<b.length;a++)b[a].x=this.x,b[a].y=this.y},Prometheus.Graphics.prototype.renderCanvas=function(a){for(var b=a.context,c=0,d=this.graphicsData;c<d.length;c++)b.beginPath(),b.fillStyle=d[c].bgcolor,b.fillRect(d[c].x,d[c].y,d[c].w,d[c].h),b.closePath()},Prometheus.Sprite=function(){Prometheus.DisplayObjectContainer.call(this),this.textureSprite=[]},Prometheus.Sprite.prototype=Object.create(Prometheus.DisplayObjectContainer.prototype),Prometheus.Sprite.prototype.constructor=Prometheus.Sprite,Prometheus.Sprite.prototype.setTexture=function(a){var b=new Image,c=this;return b.src=a,b.onload=function(a){c.width=a.target.width,c.height=a.target.height,c.swidth=a.target.width,c.sheight=a.target.height},this.textureSprite.push({path:a,sx:this.sx,sy:this.sy,swidth:this.swidth,sheight:this.sheight,x:this.x,y:this.y,img:b}),this},Prometheus.Sprite.prototype.updateTransform=function(){for(var a=0,b=this.textureSprite;a<b.length;a++)b[a].x=this.x,b[a].y=this.y,b[a].width=this.width,b[a].height=this.height,b[a].sx=this.sx,b[a].sy=this.sy,b[a].swidth=this.swidth,b[a].sheight=this.sheight},Prometheus.Sprite.prototype.renderCanvas=function(a){var b=a.context,c=a.offcontext,d=a.offview;if(this.visible!==!1&&0!==this.alpha){for(var e=this.stage.width,f=this.stage.height,g=0,h=this.textureSprite;g<h.length;g++){{var i=h[g].sx,j=h[g].sy,k=h[g].x,l=h[g].y,m=h[g].swidth,n=h[g].sheight,o=h[g].width,p=h[g].height,q=h[g].img;q.width||0,q.height||0}c.clearRect(0,0,e,f),c.drawImage(q,i,j,m,n,k,l,o,p)}b.drawImage(d,0,0)}},Prometheus.Spritemap=function(){Prometheus.DisplayObjectContainer.call(this),this.textureSprite=[]},Prometheus.Spritemap.prototype=Object.create(Prometheus.DisplayObjectContainer.prototype),Prometheus.Spritemap.prototype.constructor=Prometheus.Spritemap,Prometheus.Spritemap.prototype.setTexture=function(a){var b=new Image,c=this;return b.src=a,b.onload=function(a){c.width=a.target.width,c.height=a.target.height,c.swidth=a.target.width,c.sheight=a.target.height},this.textureSprite.push({path:a,sx:this.sx,sy:this.sy,swidth:this.swidth,sheight:this.sheight,x:this.x,y:this.y,img:b}),this},Prometheus.Spritemap.prototype.updateTransform=function(){for(var a=0,b=this.textureSprite;a<b.length;a++)b[a].x=this.x,b[a].y=this.y,b[a].width=this.width,b[a].height=this.height,b[a].sx=this.sx,b[a].sy=this.sy,b[a].swidth=this.swidth,b[a].sheight=this.sheight},Prometheus.Spritemap.prototype.renderCanvas=function(a){var b=a.context,c=a.offcontext,d=a.offview,e=this.stage.width,f=this.stage.height;if(this.visible!==!1&&0!==this.alpha){for(var g=0,h=this.textureSprite;g<h.length;g++){var i=h[g].sx,j=h[g].sy,k=h[g].x,l=h[g].y,m=(h[g].swidth,h[g].sheight,h[g].width,h[g].height,h[g].img),n=m.width||0,o=m.height||0,p=Math.ceil(f/o),q=0,r=0;c.save(),c.clearRect(0,0,e,f),c.beginPath(),c.rect(0,0,n,f),c.clip(),c.setTransform(1,0,0,1,0,0),q=.1+k%n,r=.1+l%o,k>0&&(q-=n),l>0&&(r-=o),c.drawImage(m,i,j,n,o,0,r,n,o),c.drawImage(m,i,j,n,o,0,p*o+r,n,o),c.restore()}b.drawImage(d,0,0)}},Prometheus.Stage=function(a){Prometheus.DisplayObjectContainer.call(this),this.stage=this,this.interactive=!0,this.dirty=!0,this.stage.hitArea=new Prometheus.Rectangle(0,0,100,100),this.setBgColor(a)},Prometheus.Stage.prototype=Object.create(Prometheus.DisplayObjectContainer.prototype),Prometheus.Stage.prototype.constructor=Prometheus.Stage,Prometheus.Stage.prototype.setBgColor=function(a){this.backgroundcolor=a||0,this.backgroundColorSplit=Prometheus.hex2rgb(a);var b=this.backgroundcolor.toString(16);b="000000".substr(0,6-b.length)+b,this.backgroundString="#"+b},Prometheus.Stage.prototype.updateTransform=function(){for(var a=0,b=this.children.length;b>a;a++)this.children[a].updateTransform()},Prometheus.Stage.prototype.renderCanvas=function(a){for(var b=0,c=this.children.length;c>b;b++)this.children[b].renderCanvas(a)},Prometheus.Text=function(a,b){Prometheus.DisplayObjectContainer.call(this),this.content=a||"",this.style=b||{font:"20px 宋体",color:"#000000"},this.currentText=[],this.setText()},Prometheus.Text.prototype=Object.create(Prometheus.DisplayObjectContainer.prototype),Prometheus.Text.prototype.constructor=Prometheus.Text,Prometheus.Text.prototype.setText=function(){return this.currentText.push({t:this.content,txtwidth:0,color:this.style.color||"#000000",font:this.style.font||"18px 宋体"}),this},Prometheus.Text.prototype.updateTransform=function(){for(var a=0,b=this.currentText;a<b.length;a++)b[a].x=this.x,b[a].y=this.y},Prometheus.Text.prototype.renderCanvas=function(a){for(var b=a.context,c=0,d=this.currentText;c<d.length;c++)b.beginPath(),b.font=d[c].font,b.fillStyle=d[c].color,b.fillText(d[c].t,d[c].x,d[c].y),d[c].txtwidth=b.measureText(d[c].t).width,b.closePath()},Prometheus.Events=function(){this.addEventListener=this.on=function(){},this.dispatchEvent=this.emit=function(){},this.removeEventListener=this.off=function(){},this.removeEventsListener=function(){}},Prometheus.Rectangle=function(a,b,c,d){this.width=c||0,this.height=d||0,this.x=a||0,this.y=b||0},Prometheus.Rectangle.prototype.clone=function(){return new Prometheus.Rectangle(this.x,this.y,this.width,this.height)},Prometheus.Rectangle.prototype.contains=function(a,b){return this.width<=0||this.height<=0?!1:a>this.x&&a<this.x+this.width&&b>this.y&&b<this.y+this.height?!0:!1},Prometheus.AssetsLoader=function(a,b){Prometheus.Events.call(this),this.assetsURLs=a||"",this.across=b,this.arraylength=0},Prometheus.AssetsLoader.prototype.constructor=Prometheus.AssetsLoader,Prometheus.AssetsLoader.loadjs=function(){},Prometheus.AssetsLoader.loadjs.prototype=Object.create(Prometheus.AssetsLoader.prototype),Prometheus.AssetsLoader.loadjs.prototype.constructor=Prometheus.AssetsLoader.loadjs,Prometheus.CanvasRender=function(a,b,c,d){this.width=a||550,this.height=b||400,this.transparent=!!d,this.view=c||document.createElement("canvas"),this.offview=document.createElement("canvas"),this.offcontext=this.offview.getContext("2d"),this.context=this.view.getContext("2d",{alpha:this.transparent}),this.clearBeforeRender=!0,this.view.width=this.width,this.view.height=this.height,this.offview.width=this.width,this.offview.height=this.height,this.lastime=0,this.lastupdate=0,this.lastfps=0,this.renderSession={offview:this.offview,offcontext:this.offcontext,context:this.context,session:null},"imageSmoothingEnabled"in this.context?this.renderSession.session="imageSmoothingEnabled":"webkitImageSmoothingEnabled"in this.context?this.renderSession.session="webkitImageSmoothingEnabled":"mozImageSmoothingEnabled"in this.context?this.renderSession.session="mozImageSmoothingEnabled":"oImageSmoothingEnabled"in this.context&&(this.renderSession.session="oImageSmoothingEnabled")},Prometheus.CanvasRender.prototype.constructor=Prometheus.CanvasRender,Prometheus.CanvasRender.prototype.render=function(a){a.updateTransform(),a.width=this.width,a.height=this.height,!this.transparent&&this.clearBeforeRender?(this.context.fillStyle=a.backgroundString,this.context.fillRect(0,0,this.width,this.height)):this.transparent&&this.clearBeforeRender&&this.context.clearRect(0,0,this.width,this.height),this.renderDisplayObject(a)},Prometheus.CanvasRender.prototype.renderDisplayObject=function(a,b){this.renderSession.context=b||this.context,a.renderCanvas(this.renderSession)},Prometheus.CanvasRender.prototype.returnfps=function(){var a=+new Date,b=1e3/(a-this.lastime);return this.lastime=a,b},Prometheus.CanvasRender.prototype.status=function(){var a=0,b=+new Date;return a=this.returnfps(),b-this.lastupdate>1e3&&(this.lastupdate=b,this.lastfps=a),this.lastfps.toFixed()},Prometheus.CanvasRender.prototype.resize=function(a,b){this.width=a,this.height=b,this.view.width=this.width,this.view.height=this.height,this.offview.width=this.width,this.offview.height=this.height},Prometheus.CanvasRender.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},Prometheus.CanvasRender.prototype.offclear=function(){this.offcontext.clearRect(0,0,this.width,this.height)},Prometheus.WebGlRender=function(a,b,c,d){this.transparent=!!d,this.width=a||500,this.height=b||400,this.view=c||document.createElement("canvas"),this.offview=document.createElement("canvas"),this.view.width=this.width,this.view.height=this.height,this.offview.width=this.width,this.offview.height=this.height,this.option={alpha:this.transparent},["experimental-webgl","webgl"].forEach(function(a){this.context=this.view.getContext(a,this.option),this.offcontext=this.offview.getContext(a,this.option)},this),this.context||(this.context=this.view.getContext("2d",this.option),this.offcontext=this.offview.getContext("2d",this.option)),this.lastime=0,this.lastupdate=0,this.lastfps=0,this.renderSession={offview:this.offview,offcontext:this.offcontext,context:this.context,session:null},"imageSmoothingEnabled"in this.context?this.renderSession.session="imageSmoothingEnabled":"webkitImageSmoothingEnabled"in this.context?this.renderSession.session="webkitImageSmoothingEnabled":"mozImageSmoothingEnabled"in this.context?this.renderSession.session="mozImageSmoothingEnabled":"oImageSmoothingEnabled"in this.context&&(this.renderSession.session="oImageSmoothingEnabled")},Prometheus.WebGlRender.prototype.constructor=Prometheus.WebGlRender,Prometheus.WebGlRender.prototype.render=function(a){a.width=this.width,a.height=this.height,!this.transparent&&this.clearBeforeRender?(this.context.fillStyle=a.backgroundString,this.context.fillRect(0,0,this.width,this.height)):this.transparent&&this.clearBeforeRender&&this.context.clearRect(0,0,this.width,this.height),a.updateTransform(),this.renderDisplayObject(a)},Prometheus.WebGlRender.prototype.renderDisplayObject=function(a,b){this.renderSession.context=b||this.context,a.renderCanvas(this.renderSession)},Prometheus.WebGlRender.prototype.returnfps=function(){var a=+new Date,b=1e3/(a-this.lastime);return this.lastime=a,b},Prometheus.WebGlRender.prototype.status=function(){var a=0,b=+new Date;return a=this.returnfps(),b-this.lastupdate>1e3&&(this.lastupdate=b,this.lastfps=a),this.lastfps.toFixed()},Prometheus.WebGlRender.prototype.resize=function(a,b){this.width=a,this.height=b,this.view.width=this.width,this.view.height=this.height,this.offview.width=this.width,this.offview.height=this.height},Prometheus.WebGlRender.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},Prometheus.WebGlRender.prototype.offclear=function(){this.offcontext.clearRect(0,0,this.width,this.height)},window.requestRender=function(){var a,b,c,d,e=navigator.userAgent,f=this;return window.webkitRequestAnimationFrame&&(b=function(a){void 0===a&&(a=(new Date).getTime()),f.callback(a)},a=window.webkitRequestAnimationFrame,window.webkitRequestAnimationFrame=function(c,d){f.callback=c,a(b,d)}),window.mozRequestAnimationFrame&&(d=e.indexOf("rv:"),-1!=e.indexOf("Gecko")&&(c=e.substr(d+3,3),"2.0"===c&&(window.mozRequestAnimationFrame=void 0))),window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){var b,c;window.setTimeout(function(){b=(new Date).getTime(),a(b),c=(new Date).getTime(),f.timeout=1e3/60-(c-b)},f.timeout)}}();var _lastime=0,_txt,_frame,lastFpsUpdateTime=0,lastFpsUpdate=0,Timefps={init:function(){_txt=new PIXI.Text("",{font:"bold 15px arial",fill:"#ffffff",align:"center"}),_frame=new PIXI.Text("",{font:"bold 15px arial",fill:"#ffffff",align:"center"}),_txt.y=10,_frame.y=40,scene.addChild(_txt),scene.addChild(_frame),Comm.buttonmode(_txt,!0),window.requestNextAnimationFrame(Timefps.animate)},calculateFps:function(){var a=+new Date,b=1e3/(a-_lastime);return _lastime=a,b},animate:function(a){var b=0;"undefinded"==a&&(a=+new Date),b=Timefps.calculateFps(),a-lastFpsUpdateTime>1e3&&(lastFpsUpdateTime=a,lastFpsUpdate=b),_txt.setText("  "+lastFpsUpdate.toFixed()+"fps"),window.requestNextAnimationFrame(Timefps.animate)}};Prometheus.hex2rgb=function(a){return[(a>>16&255)/255,(a>>8&255)/255,(255&a)/255]},Prometheus.hex16rgb=function(a){return"#"+"000000".substr(0,6-a.toString(16).length)+a.toString(16)};